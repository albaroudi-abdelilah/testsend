document.getElementById('emailForm').addEventListener('submit', (event) => {
  event.preventDefault();

  const form = event.target;
  const popup = window.open('', 'emailWindow', 'width=400,height=400');

  popup.document.write(`
    <html>
      <body>
        <form action="${form.action}" method="${form.method}" target="_self">
          <input type="hidden" name="recipient_email" value="${form.recipient_email.value}">
          <input type="hidden" name="subject" value="${form.subject.value}">
        </form>
        <script>
          document.forms[0].submit();
        </script>
      </body>
    </html>
  `);
});
